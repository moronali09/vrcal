<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Vrcal â€” Simple Player</title>
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    html,body{height:100%;margin:0}
    .wrap{display:flex;flex-direction:column;height:100vh;background:#0b0b0b;color:#fff}
    .top{padding:12px;display:flex;gap:8px;align-items:center;background:rgba(0,0,0,0.35)}
    input{flex:1;padding:10px 12px;border-radius:8px;border:0;font-size:16px;background:#111;color:#fff}
    button{padding:10px 14px;border-radius:8px;border:0;background:#1f8cff;color:#fff;font-weight:600}
    .player{flex:1;display:flex;align-items:center;justify-content:center;padding:8px}
    video{width:100%;height:100%;background:#000;border-radius:6px;outline:none;max-height:100%}
    .msg{position:absolute;left:50%;top:60%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.6);padding:10px 14px;border-radius:8px;color:#fff;display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <input id="url" placeholder="Enter video link and press Enter (mp4, mp3, m3u8 if browser supports)">
      <button id="load">Load</button>
    </div>
    <div class="player" id="playerWrap" style="position:relative">
      <video id="video" controls playsinline crossorigin></video>
      <div id="msg" class="msg"></div>
    </div>
  </div>

  <script>
    const urlIn = document.getElementById('url')
    const loadBtn = document.getElementById('load')
    const video = document.getElementById('video')
    const msg = document.getElementById('msg')

    function showMsg(t, timeout=2500){
      msg.textContent = t
      msg.style.display = 'block'
      clearTimeout(msg._t)
      msg._t = setTimeout(()=>{ msg.style.display='none' }, timeout)
    }

    function loadUrl(u){
      if(!u) return
      try{
        video.pause()
        video.removeAttribute('src')
        video.src = u
        video.load()
        video.play().catch(()=>{})
        showMsg('Loading...')
      }catch(e){
        showMsg('Load failed')
      }
    }

    loadBtn.addEventListener('click', ()=> loadUrl(urlIn.value.trim()))
    urlIn.addEventListener('keydown', (e)=>{ if(e.key==='Enter') loadUrl(urlIn.value.trim()) })

    video.addEventListener('error', ()=> {
      const e = video.error
      let text = 'Video error'
      if(e){
        switch(e.code){
          case 1: text = 'Playback aborted'; break
          case 2: text = 'Network error'; break
          case 3: text = 'Decoding error'; break
          case 4: text = 'Unsupported format'; break
        }
      }
      showMsg(text)
    })

    video.addEventListener('loadedmetadata', ()=> showMsg('Ready'))
  </script>
</body>
</html>
